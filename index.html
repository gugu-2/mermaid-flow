<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dark Mermaid Flow</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/panzoom@9.4.0/dist/panzoom.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #0d0a1b; /* deep purple-black */
        color: #ffffff;
        overflow: hidden;
        font-family: sans-serif;
      }

      .container {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        background-color: #0d0a1b;
      }

      .zoom-wrapper {
        width: 100%;
        height: 100%;
        cursor: grab;
      }

      .mermaid {
        padding: 2rem;
        color: #fff;
      }

      svg {
        width: auto;
        height: auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="zoom-wrapper" id="panzoom">
        <div class="mermaid">
          graph TD  
            A[Customer Visits Website] --> B[Customer Enters Postcode/Address]  
            B --> C{Address Eligible?}  
            C -->|No| D[Display Unavailable Message]  
            C -->|Yes| E[Display Available Services]  
            E --> F[Customer Selects Service Package]  
            F --> G[Display Calendar with Available Time Slots]  
            G --> H[Customer Selects Appointment Date/Time]  
            H --> I[Customer Fills Installation Details Form]  
            I --> J[Property Access Information]  
            J --> K[Existing Infrastructure Details]  
            K --> L[Special Requirements]  
            L --> M[Customer Reviews Booking Details]  
            M --> N{Confirm Booking?}  
            N -->|No| O[Edit Details]  
            O --> M  
            N -->|Yes| P[Process Booking]  
            P --> Q[Send Confirmation Email/SMS]  
            Q --> R[Store Appointment in System]  
            R --> S[Schedule Automated Reminder]  
            S --> T[24h Before: Send Reminder Email/SMS]  
            
            subgraph Technician Flow  
              U[Technician Receives Job Assignment] --> V[Technician Views Job Details on Mobile]  
              V --> W[Access Customer Information]  
              V --> X[View Property Specifics]  
              V --> Y[Review Installation Requirements]  
              Y --> Z[Technician Completes Installation]  
              Z --> AA[Technician Updates Job Status]  
            end  
            
            T --> U  
            
            subgraph Cancellation/Rescheduling  
              M --> AB[Customer Needs to Cancel/Reschedule]  
              AB --> AC[Customer Accesses Booking Management]  
              AC --> AD{Cancel or Reschedule?}  
              AD -->|Cancel| AE[Confirm Cancellation]  
              AD -->|Reschedule| AF[Return to Calendar View]  
              AF --> G  
            end
        </div>
      </div>
    </div>

    <script>
      mermaid.initialize({
        startOnLoad: true,
        theme: "dark",
        themeVariables: {
          background: "#0d0a1b",
          primaryColor: "#8c65ff",
          primaryTextColor: "#ffffff",
          nodeTextColor: "#ffffff",
          lineColor: "#cccccc"
        }
      });

      window.addEventListener("load", () => {
        const element = document.getElementById("panzoom");
        panzoom(element, {
          smoothScroll: true,
          maxZoom: 5,
          minZoom: 0.5
        });
      });
    </script>
  </body>
</html>
